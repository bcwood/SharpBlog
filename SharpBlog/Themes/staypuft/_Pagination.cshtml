@using SharpBlog.Models

<div class="pagination">
    @if (Page.PageNumber > 1)
    {
        var url = Request.Url.PathAndQuery;
        if (Page.PageNumber == 2)
        {
            url = url.Replace($"page/{Page.PageNumber}", "");
        }
        else
        {
            url = url.Replace($"/page/{Page.PageNumber}", $"/page/{Page.PageNumber - 1}");
        }

        <div class="newer-posts">
            <a href="@url">&larr; Prev</a>
        </div>
    }

    @{
        int totalPages = (int) Math.Ceiling((double)Page.TotalPosts / (double)Config.Settings.PostsPerPage);
    }

    @if (Page.PageNumber < totalPages)
    {
        var url = Request.Url.AbsolutePath;
        if (Page.PageNumber == 1)
        {
            url += $"/page/{Page.PageNumber + 1}{Request.Url.Query}";
        }
        else
        {
            url = url.Replace($"/page/{Page.PageNumber}", $"/page/{Page.PageNumber + 1}{Request.Url.Query}");
        }

        url = url.Replace("//", "/"); // HACK

        <div class="older-posts">
            <a href="@url">Next &rarr;</a>
        </div>
    }
</div>